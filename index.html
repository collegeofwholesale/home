<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>College of Wholesale | Learn Wholesaling, Find Deals, Get Paid</title>
  <meta name="description" content="College of Wholesale ‚Äî training, tools, community, and internships to help you learn wholesaling and close deals." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üêÑ</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { brand:'#3b82f6', ink:'#0b1220', milk:'#f1f5f9' }}}}
  </script>
  <style>
    html{scroll-behavior:smooth}
    .glass{backdrop-filter:saturate(180%) blur(16px);background:rgba(15,23,42,.6)}
    .container{max-width:1100px}
    .hidden-section{display:none}
    .active-link{color:#3b82f6}
    .input{background:#0f172aCC;border:1px solid rgba(255,255,255,.1);border-radius:.75rem;padding:.65rem .9rem}
    .card{border:1px solid rgba(255,255,255,.1);background:#0b1220CC;border-radius:1rem;padding:1.25rem}
    .k{color:#94a3b8}
  </style>
</head>
<body class="bg-ink text-slate-100">
  <!-- NAVBAR -->
  <header class="sticky top-0 z-40 glass border-b border-white/10">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#/" data-nav="home" class="flex items-center gap-2 font-bold"><span class="text-2xl">üêÑ</span><span>College of Wholesale</span></a>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#/calculators" data-nav="calculators" class="hover:text-brand">Calculators</a>
        <a href="#/terms" data-nav="terms" class="hover:text-brand">Seller Finance</a>
        <a href="#/internship" data-nav="internship" class="hover:text-brand">Internship</a>
        <a href="#/contact" data-nav="contact" class="hover:text-brand">Contact</a>
        <a href="https://drive.google.com/drive/folders/1aA0tk53ojvfzD08nyDDAZ1sdDLp7T3zS" target="_blank" rel="noopener" class="hover:text-brand">Training</a>
        <a href="https://whop.com/collegeofwholesale" target="_blank" rel="noopener" class="hover:text-brand">Community</a>
        <a href="https://puzzled-sand-3fb.notion.site/Cold-Caller-HQ-1fc3f51148a7805ea4d7fde4cbafa676" target="_blank" rel="noopener" class="hover:text-brand">Notion HQ</a>
      </nav>
      <button id="menuBtn" class="md:hidden inline-flex items-center justify-center w-9 h-9 rounded-lg border border-white/15">‚ò∞</button>
    </div>
    <div id="mobileMenu" class="md:hidden hidden border-t border-white/10">
      <nav class="container mx-auto px-4 py-3 grid gap-3 text-sm">
        <a href="#/" data-nav="home" class="hover:text-brand">Home</a>
        <a href="#/calculators" data-nav="calculators" class="hover:text-brand">Calculators</a>
        <a href="#/terms" data-nav="terms" class="hover:text-brand">Seller Finance</a>
        <a href="#/internship" data-nav="internship" class="hover:text-brand">Internship</a>
        <a href="#/contact" data-nav="contact" class="hover:text-brand">Contact</a>
        <hr class="border-white/10">
        <a href="https://drive.google.com/drive/folders/1aA0tk53ojvfzD08nyDDAZ1sdDLp7T3zS" target="_blank" rel="noopener" class="hover:text-brand">Training (Drive)</a>
        <a href="https://whop.com/collegeofwholesale" target="_blank" rel="noopener" class="hover:text-brand">Community (Whop)</a>
        <a href="https://puzzled-sand-3fb.notion.site/Cold-Caller-HQ-1fc3f51148a7805ea4d7fde4cbafa676" target="_blank" rel="noopener" class="hover:text-brand">Notion HQ</a>
      </nav>
    </div>
  </header>

  <main>
    <!-- HOME -->
    <section id="page-home" class="container mx-auto px-4 py-20">
      <h1 class="text-5xl font-extrabold leading-tight">Learn Wholesaling. <span class="text-brand">Close Deals.</span></h1>
      <p class="mt-4 text-lg text-slate-300 max-w-2xl">Action-based training, calculators, community, and a clear path to your first (or next) deal.</p>
      <div class="mt-6 flex flex-wrap gap-4">
        <a href="https://drive.google.com/drive/folders/1aA0tk53ojvfzD08nyDDAZ1sdDLp7T3zS" target="_blank" rel="noopener" class="rounded-xl bg-brand px-6 py-3 font-semibold text-white">Start Training</a>
        <a href="https://whop.com/collegeofwholesale" target="_blank" rel="noopener" class="rounded-xl border border-white/20 px-6 py-3 font-semibold">Join Community</a>
        <a href="https://puzzled-sand-3fb.notion.site/Cold-Caller-HQ-1fc3f51148a7805ea4d7fde4cbafa676" target="_blank" rel="noopener" class="rounded-xl border border-white/20 px-6 py-3 font-semibold">Open Notion HQ</a>
      </div>

      <section class="bg-slate-900/30 border border-white/10 rounded-2xl mt-12">
        <div class="container mx-auto px-4 py-12">
          <h2 class="text-3xl font-bold mb-8">Fast Links</h2>
          <div class="grid md:grid-cols-3 gap-6">
            <a href="#/calculators" class="rounded-2xl p-6 border border-white/10 bg-slate-900/40">
              <h3 class="text-lg font-semibold">Deal Calculator</h3>
              <p class="mt-2 text-slate-300 text-sm">MAO / LAO / exit suggestions.</p>
            </a>
            <a href="#/terms" class="rounded-2xl p-6 border border-white/10 bg-slate-900/40">
              <h3 class="text-lg font-semibold">Seller Finance</h3>
              <p class="mt-2 text-slate-300 text-sm">P&I, CoC, DSCR, balloon balance.</p>
            </a>
            <a href="#/internship" class="rounded-2xl p-6 border border-white/10 bg-slate-900/40">
              <h3 class="text-lg font-semibold">Internship & Team</h3>
              <p class="mt-2 text-slate-300 text-sm">Apply in 2 minutes and start learning.</p>
            </a>
          </div>
        </div>
      </section>
    </section>

    <!-- WHOLESALE CALCULATOR -->
    <section id="page-calculators" class="container mx-auto px-4 py-16 hidden-section">
      <h1 class="text-4xl font-bold">Wholesale Deal Calculator</h1>
      <p class="mt-2 text-slate-300">Get a realistic <b>offer range</b> using both the classic 70% rule and a reverse-engineered buyer-profit method.</p>

      <div class="mt-8 grid xl:grid-cols-3 gap-6">
        <!-- Inputs -->
        <div class="card xl:col-span-2">
          <h3 class="text-xl font-semibold">Inputs</h3>
          <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
            <label class="grid gap-1"><span class="k">ARV</span><input id="arv" type="number" class="input" placeholder="350000"></label>
            <label class="grid gap-1"><span class="k">Repairs</span><input id="repairs" type="number" class="input" placeholder="45000"></label>
            <label class="grid gap-1"><span class="k">Assignment Fee</span><input id="fee" type="number" class="input" placeholder="15000"></label>
            <label class="grid gap-1"><span class="k">Holding/Closing (total)</span><input id="holding" type="number" class="input" placeholder="10000"></label>
            <label class="grid gap-1"><span class="k">Liens/Payoff (optional)</span><input id="liens" type="number" class="input" placeholder="0"></label>
            <label class="grid gap-1"><span class="k">Market Contingency %</span><input id="contg" type="number" class="input" placeholder="3" value="3"></label>

            <label class="grid gap-1"><span class="k">MAO % of ARV</span><input id="maoPct" type="number" class="input" placeholder="70" value="70"></label>
            <label class="grid gap-1"><span class="k">Buyer Profit % (rev.)</span><input id="profitPct" type="number" class="input" placeholder="12" value="12"></label>
            <label class="grid gap-1"><span class="k">Selling Costs % (rev.)</span><input id="sellPct" type="number" class="input" placeholder="8" value="8"></label>

            <label class="grid gap-1"><span class="k">Negotiation Buffer % (LAO)</span><input id="bufferPct" type="number" class="input" placeholder="12" value="12"></label>
            <label class="grid gap-1"><span class="k">Monthly Hold (opt.)</span><input id="holdMonthly" type="number" class="input" placeholder="1200"></label>
            <label class="grid gap-1"><span class="k">Hold Months (opt.)</span><input id="holdMonths" type="number" class="input" placeholder="3"></label>
          </div>

          <button id="calcBtn" class="mt-4 rounded-xl bg-brand px-4 py-2 font-semibold">Calculate</button>
        </div>

        <!-- Output -->
        <div class="card">
          <h3 class="text-xl font-semibold">Results</h3>
          <div id="calcOut" class="mt-4 text-sm text-slate-200 hidden"></div>
          <div id="rangeOut" class="mt-4 hidden">
            <div class="text-slate-300 text-xs mb-1">Suggested Offer Range</div>
            <div class="text-2xl font-extrabold"><span id="laoSpan">‚Äî</span> ‚Üí <span id="maoSpan">‚Äî</span></div>
            <div class="text-slate-400 text-xs mt-1">LAO = anchoring offer (with buffer). MAO = walk-away ceiling.</div>
          </div>
        </div>
      </div>

      <div class="grid lg:grid-cols-2 gap-6 mt-6">
        <div class="card">
          <h3 class="text-lg font-semibold">How we calculate</h3>
          <ul class="mt-3 list-disc pl-5 text-sm text-slate-300">
            <li><b>Classic MAO:</b> (ARV √ó MAO%) ‚àí Repairs ‚àí Holding ‚àí Assignment ‚àí Liens ‚àí Contingency.</li>
            <li><b>Reverse MAO:</b> ARV √ó (1 ‚àí Selling% ‚àí BuyerProfit%) ‚àí Repairs ‚àí Holding ‚àí Assignment ‚àí Liens ‚àí Contingency.</li>
            <li><b>Final MAO:</b> We take the <i>lower</i> of Classic vs Reverse for safety.</li>
            <li><b>LAO (anchor):</b> MAO √ó (1 ‚àí Buffer%).</li>
          </ul>
        </div>
        <div class="card">
          <h3 class="text-lg font-semibold">Strategy Hints</h3>
          <ul id="strategyOut" class="mt-3 space-y-2 text-sm list-disc pl-5">
            <li>Enter numbers to see suggestions.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- SELLER FINANCE CALCULATOR -->
    <section id="page-terms" class="container mx-auto px-4 py-16 hidden-section">
      <h1 class="text-4xl font-bold">Seller-Finance Calculator</h1>
      <p class="mt-2 text-slate-300">Model P&I, cash flow, <b>cash-on-cash</b>, <b>DSCR</b>, and balloon balance.</p>

      <div class="mt-8 grid xl:grid-cols-3 gap-6">
        <!-- Inputs -->
        <div class="card xl:col-span-2">
          <h3 class="text-xl font-semibold">Terms & Income</h3>
          <div class="mt-4 grid sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm">
            <label class="grid gap-1"><span class="k">Purchase Price</span><input id="t_price" type="number" class="input" placeholder="350000"></label>
            <label class="grid gap-1"><span class="k">Down Payment %</span><input id="t_down" type="number" class="input" placeholder="10" value="10"></label>
            <label class="grid gap-1"><span class="k">Interest %</span><input id="t_rate" type="number" class="input" placeholder="4" value="4"></label>

            <label class="grid gap-1"><span class="k">Amort Years</span><input id="t_amort" type="number" class="input" placeholder="30" value="30"></label>
            <label class="grid gap-1"><span class="k">Balloon (yrs, opt.)</span><input id="t_balloon" type="number" class="input" placeholder="7"></label>
            <label class="grid gap-1"><span class="k">Closing Costs (cash)</span><input id="t_close" type="number" class="input" placeholder="4000" value="4000"></label>

            <label class="grid gap-1"><span class="k">Monthly Rent</span><input id="t_rent" type="number" class="input" placeholder="2600"></label>
            <label class="grid gap-1"><span class="k">Taxes / mo</span><input id="t_tax" type="number" class="input" placeholder="300"></label>
            <label class="grid gap-1"><span class="k">Insurance / mo</span><input id="t_ins" type="number" class="input" placeholder="150"></label>

            <label class="grid gap-1"><span class="k">HOA / mo (opt.)</span><input id="t_hoa" type="number" class="input" placeholder="0"></label>
            <label class="grid gap-1"><span class="k">Maintenance % rent</span><input id="t_maint" type="number" class="input" placeholder="8" value="8"></label>
            <label class="grid gap-1"><span class="k">Vacancy % rent</span><input id="t_vac" type="number" class="input" placeholder="6" value="6"></label>

            <label class="grid gap-1"><span class="k">Mgmt % rent</span><input id="t_mgmt" type="number" class="input" placeholder="8" value="8"></label>
            <label class="grid gap-1"><span class="k">Other Exp / mo</span><input id="t_other" type="number" class="input" placeholder="0"></label>
            <label class="grid gap-1"><span class="k">Repairs (initial cash)</span><input id="t_repairs" type="number" class="input" placeholder="0"></label>

            <label class="grid gap-1"><span class="k">Target DSCR</span><input id="t_dscr_target" type="number" class="input" placeholder="1.20" value="1.20"></label>
          </div>
          <button id="termsBtn" class="mt-4 rounded-xl bg-brand px-4 py-2 font-semibold">Calculate Terms</button>
        </div>

        <!-- Output -->
        <div class="card">
          <h3 class="text-xl font-semibold">Results</h3>
          <div id="termsOut" class="mt-4 text-sm text-slate-200 hidden"></div>
          <div id="termsRange" class="mt-4 hidden">
            <div class="text-slate-300 text-xs mb-1">Key Metrics</div>
            <div class="space-y-1">
              <div>Monthly P&I: <b id="t_pmt">‚Äî</b></div>
              <div>Monthly Cash Flow: <b id="t_cf">‚Äî</b></div>
              <div>CoC Return: <b id="t_coc">‚Äî</b></div>
              <div>DSCR: <b id="t_dscr">‚Äî</b> (Target <span id="t_dscr_target_view">1.20</span>+)</div>
              <div class="text-xs text-slate-400">Balloon balance at year <span id="t_balloon_year">‚Äî</span>: <b id="t_balloon_bal">‚Äî</b></div>
            </div>
          </div>
        </div>
      </div>

      <div class="grid lg:grid-cols-2 gap-6 mt-6">
        <div class="card">
          <h3 class="text-lg font-semibold">How it works</h3>
          <ul class="mt-3 list-disc pl-5 text-sm text-slate-300">
            <li><b>P&I:</b> Amortized payment on (Price ‚àí Down Payment) at Interest %, Amort Years.</li>
            <li><b>NOI:</b> Rent ‚àí (Taxes, Insurance, HOA, Maint%, Vac%, Mgmt%, Other).</li>
            <li><b>Cash Flow:</b> NOI ‚àí P&I.</li>
            <li><b>CoC:</b> Annual Cash Flow √∑ Cash Invested (Down + Closing + Repairs).</li>
            <li><b>DSCR:</b> NOI √∑ P&I (‚â• target is safer; lenders often want 1.20+).</li>
            <li><b>Balloon:</b> Remaining balance after N months if balloon year is set.</li>
          </ul>
        </div>
        <div class="card">
          <h3 class="text-lg font-semibold">Negotiation Hints</h3>
          <ul id="termsTips" class="mt-3 space-y-2 text-sm list-disc pl-5">
            <li>Lower rate or longer amort = lower P&I ‚Üí stronger DSCR & CoC.</li>
            <li>Raise down payment only if it improves CoC materially.</li>
            <li>If DSCR &lt; target, ask for interest-only for 12‚Äì24 months or rate buydown.</li>
            <li>Beware HOA-heavy townhomes; check rent comps & restrictions.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- INTERNSHIP -->
    <section id="page-internship" class="container mx-auto px-4 py-16 hidden-section">
      <h1 class="text-4xl font-bold">Internship & Team</h1>
      <p class="mt-2 text-slate-300 max-w-xl">Learn the full pipeline ‚Äî from list pulling to closing ‚Äî and earn commissions while training.</p>
      <div class="mt-6 grid md:grid-cols-3 gap-6">
        <div class="card">
          <h3 class="font-semibold">What You‚Äôll Do</h3>
          <ul class="mt-3 list-disc pl-5 text-sm text-slate-300">
            <li>Pull lists weekly (probate, code violations, tax liens, etc.)</li>
            <li>Tag and organize leads in CRM</li>
            <li>Cold call with WAVV scripts and coaching</li>
          </ul>
        </div>
        <div class="card">
          <h3 class="font-semibold">What You‚Äôll Get</h3>
          <ul class="mt-3 list-disc pl-5 text-sm text-slate-300">
            <li>Direct mentorship and training modules</li>
            <li>Commission on closed deals</li>
            <li>Resume credit and experience</li>
          </ul>
        </div>
        <div class="card flex flex-col justify-between">
          <div>
            <h3 class="font-semibold">Apply Now</h3>
            <p class="mt-2 text-slate-300 text-sm">Apply in under 2 minutes. We review and reply within 48 hours.</p>
          </div>
          <a href="https://docs.google.com/forms/d/e/1FAIpQLSdbL4HwSC_UFNN6EmCliiUAvejZOu18A9vSiaQ2mDcx_nxaQQ/viewform?usp=preview" target="_blank" rel="noopener" class="mt-4 inline-block rounded-xl bg-brand px-5 py-3 font-semibold text-center">Open Application Form</a>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="page-contact" class="container mx-auto px-4 py-16 hidden-section">
      <h1 class="text-4xl font-bold">Contact</h1>
      <p class="mt-2 text-slate-300">Business inquiries, partnerships, and speaking.</p>
      <div class="grid lg:grid-cols-2 gap-6 items-start mt-6">
        <ul class="text-sm text-slate-300 space-y-2">
          <li>üìß <a href="mailto:aaarya3455@gmail.com" class="underline">aaarya3455@gmail.com</a></li>
          <li>üé• TikTok: <a href="https://www.tiktok.com/@the.college.of.wholesale" target="_blank" rel="noopener" class="underline">@the.college.of.wholesale</a></li>
          <li>üì∏ Instagram: <a href="https://instagram.com/arya.saliany" target="_blank" rel="noopener" class="underline">@arya.saliany</a></li>
        </ul>
        <form class="card grid gap-3" action="https://formspree.io/f/your-id" method="POST">
          <div class="grid sm:grid-cols-2 gap-3">
            <input class="input" name="name" placeholder="Name" required>
            <input class="input" name="email" type="email" placeholder="Email" required>
          </div>
          <input class="input" name="subject" placeholder="Subject">
          <textarea class="input min-h-[120px]" name="message" placeholder="How can we help?" required></textarea>
          <button class="rounded-xl bg-brand px-5 py-3 font-semibold">Send</button>
          <p class="text-xs text-slate-400">Powered by Formspree ‚Äî replace with your endpoint.</p>
        </form>
      </div>
    </section>
  </main>

  <footer class="border-t border-white/10">
    <div class="container mx-auto px-4 py-8 text-sm text-slate-400 text-center">
      ¬© <span id="year"></span> College of Wholesale ‚Ä¢ All rights reserved.
    </div>
  </footer>

  <script>
    // Footer year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Mobile menu toggle
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    menuBtn?.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

    // Router
    const routes = { '/':'page-home','/calculators':'page-calculators','/terms':'page-terms','/internship':'page-internship','/contact':'page-contact' };
    function setActiveLink(route){
      document.querySelectorAll('[data-nav]').forEach(a => a.classList.remove('active-link'));
      const key = route === '/' ? 'home' : route.replace('/','');
      document.querySelector(`[data-nav="${key}"]`)?.classList.add('active-link');
    }
    function showRoute(){
      const route = (location.hash || '#/').replace('#','');
      Object.values(routes).forEach(id => document.getElementById(id)?.classList.add('hidden-section'));
      (document.getElementById(routes[route]) || document.getElementById('page-home'))?.classList.remove('hidden-section');
      setActiveLink(route); mobileMenu?.classList.add('hidden'); window.scrollTo({top:0,behavior:'instant'});
    }
    window.addEventListener('hashchange', showRoute);
    window.addEventListener('DOMContentLoaded', showRoute);

    // Helpers
    const $ = id => document.getElementById(id);
    const fmt = n => (isFinite(n) ? n.toLocaleString(undefined,{style:'currency',currency:'USD'}) : '‚Äî');

    /* =========================
       WHOLESALE CALCULATOR
    ==========================*/
    function val(id){ return +($(id)?.value || 0) }
    function calcWholesale(){
      const ARV = val('arv');
      if(!ARV){ alert('Enter ARV'); return; }

      let repairs = val('repairs');
      let fee = val('fee');
      let holding = val('holding');
      const liens = val('liens');
      const contgPct = val('contg')/100;

      // Optional monthly holding override
      const holdMonthly = val('holdMonthly'), holdMonths = val('holdMonths');
      if(holdMonthly && holdMonths){ holding = holdMonthly * holdMonths }

      const maoPct = val('maoPct')/100 || 0.70;
      const profitPct = val('profitPct')/100 || 0.12;
      const sellPct = val('sellPct')/100 || 0.08;
      const bufferPct = val('bufferPct')/100 || 0.12;

      const contingency = ARV * contgPct;

      // MAO variants
      const classicMAO = (ARV * maoPct) - repairs - holding - fee - liens - contingency;
      const reverseMAO = (ARV * (1 - sellPct - profitPct)) - repairs - holding - fee - liens - contingency;
      const MAO = Math.min(classicMAO, reverseMAO);
      const LAO = MAO * (1 - bufferPct);

      // Output
      $('calcOut').innerHTML = [
        `<div>Classic MAO (ARV √ó ${Math.round(maoPct*100)}% ‚àí costs): <b>${fmt(classicMAO)}</b></div>`,
        `<div>Reverse MAO (ARV ‚àí selling% ‚àí buyer profit% ‚àí costs): <b>${fmt(reverseMAO)}</b></div>`,
        `<hr class="my-2 border-white/10">`,
        `<div>Contingency (${Math.round(contgPct*100)}% of ARV): <b>${fmt(contingency)}</b></div>`,
        `<div>Repairs: <b>${fmt(repairs)}</b> ‚Ä¢ Holding: <b>${fmt(holding)}</b> ‚Ä¢ Assignment: <b>${fmt(fee)}</b> ‚Ä¢ Liens: <b>${fmt(liens)}</b></div>`
      ].join('');
      $('calcOut').classList.remove('hidden');
      $('laoSpan').textContent = fmt(LAO);
      $('maoSpan').textContent = fmt(MAO);
      $('rangeOut').classList.remove('hidden');

      // Strategy tips
      const tips = [];
      if (repairs <= 20000) tips.push('‚≠ï Light repairs: wholetail may work if retail-ready neighborhood.');
      if (repairs > 20000) tips.push('üß± Heavier repairs: consider novation or seller-finance offers.');
      if (bufferPct < 0.1) tips.push('üéØ Increase buffer to 10‚Äì15% to anchor stronger.');
      if (profitPct < 0.1) tips.push('üíµ Many buyers target 10‚Äì15% profit; adjust if your buyers differ.');
      if (sellPct < 0.06) tips.push('üßæ Selling costs often 7‚Äì9% (agent, concessions, closing).');
      tips.push('üìû Always verify liens/payoff and taxes‚Äîunknowns kill spreads.');
      $('strategyOut').innerHTML = tips.map(t => `<li>${t}</li>`).join('');
    }
    document.addEventListener('click', e => { if (e.target?.id === 'calcBtn') calcWholesale(); });

    /* =========================
       SELLER-FINANCE CALCULATOR
    ==========================*/
    function pmt(rateMonthly, n, pv){
      if(rateMonthly === 0) return pv / n;
      const r = rateMonthly;
      return pv * r / (1 - Math.pow(1+r, -n));
    }
    function calcTerms(){
      const price = +$('t_price').value || 0;
      const downPct = (+$('t_down').value || 0)/100;
      const rate = (+$('t_rate').value || 0)/100;
      const amortYears = +$('t_amort').value || 30;
      const balloonYears = +$('t_balloon').value || 0;
      const closeCash = +$('t_close').value || 0;

      const rent = +$('t_rent').value || 0;
      const tax = +$('t_tax').value || 0;
      const ins = +$('t_ins').value || 0;
      const hoa = +$('t_hoa').value || 0;
      const maintPct = (+$('t_maint').value || 0)/100;
      const vacPct = (+$('t_vac').value || 0)/100;
      const mgmtPct = (+$('t_mgmt').value || 0)/100;
      const other = +$('t_other').value || 0;
      const repairsInit = +$('t_repairs').value || 0;
      const dscrTarget = +$('t_dscr_target').value || 1.2;
      $('t_dscr_target_view').textContent = dscrTarget.toFixed(2);

      if(!price || !amortYears){ alert('Enter price and amortization years'); return; }

      const dp = price * downPct;
      const pv = price - dp; // financed principal
      const n = amortYears * 12;
      const rm = rate/12;
      const payment = pmt(rm, n, pv);

      // Operating costs (monthly)
      const maint = rent * maintPct;
      const vac = rent * vacPct;
      const mgmt = rent * mgmtPct;
      const noi = rent - (tax + ins + hoa + maint + vac + mgmt + other);
      const cashFlow = noi - payment;

      // CoC
      const cashInvested = dp + closeCash + repairsInit;
      const coc = cashInvested > 0 ? (cashFlow*12)/cashInvested : 0;

      // DSCR
      const dscr = payment > 0 ? (noi / payment) : 0;

      // Balloon balance
      let balloonBal = 0, balloonYearLabel = '‚Äî';
      if (balloonYears > 0){
        const k = balloonYears * 12;
        if(rm === 0){
          balloonBal = pv * (1 - k/n);
        } else {
          const pow = Math.pow(1+rm, k);
          balloonBal = pv*pow - payment*((pow-1)/rm);
        }
        balloonYearLabel = String(balloonYears);
      }

      // Output
      const currency = v => (isFinite(v)? v.toLocaleString(undefined,{style:'currency',currency:'USD'}) : '‚Äî');
      $('t_pmt').textContent = currency(payment);
      $('t_cf').textContent = currency(cashFlow);
      $('t_coc').textContent = isFinite(coc) ? (coc*100).toFixed(1)+'%' : '‚Äî';
      $('t_dscr').textContent = isFinite(dscr) ? dscr.toFixed(2) : '‚Äî';
      $('t_balloon_year').textContent = balloonYearLabel;
      $('t_balloon_bal').textContent = currency(balloonBal);

      $('termsOut').innerHTML = [
        `<div>Financed Principal: <b>${currency(pv)}</b> ‚Ä¢ Down: <b>${currency(dp)}</b></div>`,
        `<div>NOI (monthly): <b>${currency(noi)}</b></div>`,
        `<div>Cash Invested (Down + Closing + Repairs): <b>${currency(cashInvested)}</b></div>`
      ].join('');
      $('termsOut').classList.remove('hidden');
      $('termsRange').classList.remove('hidden');

      const tips = [];
      if (dscr < dscrTarget) tips.push('üìâ DSCR below target ‚Äî negotiate lower rate or longer amortization.');
      if (coc < 0.10) tips.push('üí∞ CoC under 10% ‚Äî consider higher down only if P&I drops enough.');
      if (cashFlow < 0) tips.push('‚ö†Ô∏è Negative cash flow ‚Äî increase rent or improve terms (rate/years).');
      if (balloonYears && cashFlow > 0) tips.push('‚è≥ Plan exit before balloon: refi, sell, or extend note.');
      $('termsTips').innerHTML = tips.length ? tips.map(t => `<li>${t}</li>`).join('') :
        '<li>Looks solid ‚Äî confirm taxes/insurance and HOA rules.</li>';
    }
    document.addEventListener('click', e => { if (e.target?.id === 'termsBtn') calcTerms(); });
  </script>
</body>
</html>
